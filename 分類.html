<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å°åˆ†é¡ç‹ - äº’å‹•åˆ†é¡éŠæˆ²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff;
            user-select: none; /* é˜²æ­¢é¸å–æ–‡å­— */
        }

        /* è‡ªå®šç¾©å‹•ç•« */
        @keyframes correct-pop {
            0% { transform: scale(0); opacity: 0; }
            60% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes wrong-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .animate-item-appear {
            animation: correct-pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        .animate-correct {
            animation: correct-pop 0.4s ease-in-out;
            color: #22c55e; /* Green-500 */
        }

        .animate-wrong {
            animation: wrong-shake 0.4s ease-in-out;
            color: #ef4444; /* Red-500 */
        }

        .game-card {
            transition: all 0.3s ease;
        }
        .game-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        /* éš±è—æ»¾å‹•æ¢ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-2 sm:p-4">

    <!-- ä¸»å®¹å™¨ -->
    <div id="app" class="bg-white rounded-3xl shadow-2xl w-full max-w-4xl overflow-hidden min-h-[650px] flex flex-col relative border-4 border-blue-200">
        
        <!-- é ‚éƒ¨æ¨™é¡Œåˆ— -->
        <header class="bg-blue-500 p-3 text-white shadow-md z-10 shrink-0 relative flex justify-center items-center">
            <h1 class="text-xl sm:text-2xl font-bold tracking-wider">ğŸ§© å°å°åˆ†é¡ç‹</h1>
            
            <!-- ğŸŒŸ æ–°å¢ï¼šè¿”å›ç›®éŒ„æŒ‰éˆ• -->
            <button id="home-btn" onclick="resetGame()" class="invisible absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white p-2 rounded-full transition-all active:scale-95" title="è¿”å›ç›®éŒ„">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
            </button>
        </header>

        <!-- é é¢ 1: é¸å–® (Menu) -->
        <div id="menu-screen" class="flex-1 flex flex-col items-center justify-center p-6 space-y-6">
            <div class="text-center space-y-2">
                <h2 class="text-xl text-gray-700 font-bold">è«‹é¸æ“‡åˆ†é¡æ¨¡å¼</h2>
                <p class="text-gray-500 text-sm">é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹éŠæˆ²</p>
            </div>

            <!-- åˆ†é¡æ¨¡å¼é¸æ“‡ -->
            <div class="grid grid-cols-2 gap-4 w-full">
                <button onclick="selectMode('color')" class="mode-btn bg-red-100 hover:bg-red-200 text-red-700 border-2 border-red-300 p-4 rounded-xl flex flex-col items-center gap-2 transition">
                    <span class="text-4xl">ğŸ¨</span>
                    <span class="font-bold">é¡è‰²åˆ†é¡</span>
                </button>
                <button onclick="selectMode('usage')" class="mode-btn bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border-2 border-yellow-300 p-4 rounded-xl flex flex-col items-center gap-2 transition">
                    <span class="text-4xl">ğŸ› ï¸</span>
                    <span class="font-bold">ç”¨é€”åˆ†é¡</span>
                </button>
                <button onclick="selectMode('location')" class="mode-btn bg-blue-100 hover:bg-blue-200 text-blue-800 border-2 border-blue-300 p-4 rounded-xl flex flex-col items-center gap-2 transition">
                    <span class="text-4xl">ğŸ </span>
                    <span class="font-bold">å ´åœ°åˆ†é¡</span>
                </button>
                <button onclick="selectMode('other')" class="mode-btn bg-green-100 hover:bg-green-200 text-green-800 border-2 border-green-300 p-4 rounded-xl flex flex-col items-center gap-2 transition">
                    <span class="text-4xl">ğŸ’</span>
                    <span class="font-bold">ç‰©å“ç¨®é¡</span>
                </button>
            </div>

            <!-- é›£åº¦é¸æ“‡å€åŸŸ (éš±è—ç›´åˆ°é¸æ“‡æ¨¡å¼) -->
            <div id="difficulty-area" class="hidden w-full space-y-4 pt-4 border-t border-gray-100">
                <div class="text-center text-gray-700 font-bold">è¦åˆ†æˆå¹¾é¡ï¼Ÿ</div>
                <div class="flex gap-4 justify-center">
                    <button onclick="startGame(2)" class="bg-indigo-500 hover:bg-indigo-600 text-white py-3 px-8 rounded-full font-bold shadow-lg transform active:scale-95 transition text-lg">
                        2 é¡
                    </button>
                    <button onclick="startGame(3)" class="bg-purple-500 hover:bg-purple-600 text-white py-3 px-8 rounded-full font-bold shadow-lg transform active:scale-95 transition text-lg">
                        3 é¡
                    </button>
                </div>
            </div>
        </div>

        <!-- é é¢ 2: éŠæˆ²å€ (Game) -->
        <div id="game-screen" class="hidden flex-1 flex flex-col p-4 h-full">
            
            <!-- é€²åº¦èˆ‡åˆ†æ•¸ (Header Info) -->
            <div class="flex justify-between items-center mb-2 px-2">
                <div class="text-sm font-bold text-gray-500">é€²åº¦: <span id="current-count" class="text-blue-600">1</span>/<span id="total-count">8</span></div>
                <div class="text-sm font-bold text-gray-500">å¾—åˆ†: <span id="score-display" class="text-green-600 text-lg">0</span></div>
            </div>

            <!-- åˆ†é¡æ”¶é›†ç±ƒ (Bins) -->
            <div id="bins-container" class="grid w-full gap-3 mb-2 shrink-0 h-32">
                <!-- ç±ƒå­å°‡ç”± JS å‹•æ…‹ç”Ÿæˆ -->
            </div>

            <!-- ä¸­å¤®ç‰©å“å±•ç¤ºå€ (Item Card) -->
            <div class="flex-1 flex flex-col items-center justify-center py-2 min-h-0">
                <div id="item-card" class="bg-white border-4 border-dashed border-gray-300 rounded-3xl p-4 flex flex-col items-center justify-center aspect-square h-48 w-48 sm:h-56 sm:w-56 shadow-sm transition-all duration-300 relative">
                    <div id="item-emoji" class="text-7xl sm:text-8xl mb-2 transition-transform duration-300 select-none">ğŸ</div>
                    <div id="item-name" class="text-xl sm:text-2xl font-bold text-gray-800">è˜‹æœ</div>
                </div>
                <!-- å›é¥‹æ–‡å­— -->
                <div id="feedback-text" class="h-8 mt-2 font-bold text-lg text-center opacity-0 transition-opacity">å¤ªæ£’äº†ï¼</div>
            </div>

            <!-- åˆ†é¡æŒ‰éˆ•å€ (Buttons) -->
            <div id="category-buttons" class="grid grid-cols-2 gap-3 mt-auto shrink-0 pb-2">
                <!-- æŒ‰éˆ•å°‡ç”± JS å‹•æ…‹ç”Ÿæˆ -->
            </div>
        </div>

        <!-- é é¢ 3: çµæœ (Result) -->
        <div id="result-screen" class="hidden flex-1 flex flex-col items-center justify-center p-8 space-y-6 text-center">
            <div class="text-8xl mb-4">ğŸ†</div>
            <h2 class="text-3xl font-bold text-gray-800">éŠæˆ²çµæŸï¼</h2>
            
            <div class="bg-yellow-50 p-6 rounded-2xl border-2 border-yellow-200 w-full">
                <p class="text-gray-600 mb-2">ä½ çš„å¾—åˆ†</p>
                <p class="text-5xl font-black text-yellow-600"><span id="final-score">0</span> / 100</p>
            </div>

            <p id="result-message" class="text-lg font-bold text-blue-600">åšå¾—å¾ˆå¥½ï¼</p>

            <button onclick="resetGame()" class="mt-8 bg-blue-500 hover:bg-blue-600 text-white text-xl font-bold py-4 px-12 rounded-full shadow-lg transform hover:scale-105 transition">
                å†ç©ä¸€æ¬¡
            </button>
        </div>

    </div>

    <script>
        // --- éŠæˆ²è³‡æ–™åº« (æ“´å……è‡³æ¯é¡ 20 å€‹) ---
        const DATABASE = {
            color: {
                buckets: {
                    red: { label: "ç´…è‰²", emoji: "ğŸŸ¥", bg: "bg-red-50", border: "border-red-200", text: "text-red-700", items: [
                        { name: "è˜‹æœ", emoji: "ğŸ" }, { name: "æ¶ˆé˜²è»Š", emoji: "ğŸš’" }, { name: "è‰è“", emoji: "ğŸ“" }, { name: "æ„›å¿ƒ", emoji: "â¤ï¸" }, { name: "èƒèŸ¹", emoji: "ğŸ¦€" },
                        { name: "ç«ç‘°", emoji: "ğŸŒ¹" }, { name: "æ°£çƒ", emoji: "ğŸˆ" }, { name: "è¾£æ¤’", emoji: "ğŸŒ¶ï¸" }, { name: "å£ç´…", emoji: "ğŸ’„" }, { name: "ç•ªèŒ„", emoji: "ğŸ…" },
                        { name: "éƒµç­’", emoji: "ğŸ“®" }, { name: "æ«»æ¡ƒ", emoji: "ğŸ’" }, { name: "è˜‘è‡", emoji: "ğŸ„" }, { name: "ç´…åŒ…", emoji: "ğŸ§§" }, { name: "ç‡ˆç± ", emoji: "ğŸ®" },
                        { name: "è´è¶çµ", emoji: "ğŸ€" }, { name: "æ‹³æ“Šå¥—", emoji: "ğŸ¥Š" }, { name: "æ»…ç«å™¨", emoji: "ğŸ§¯" }, { name: "ç“¢èŸ²", emoji: "ğŸ" }, { name: "å¯æ¨‚", emoji: "ğŸ¥¤" }
                    ]},
                    blue: { label: "è—è‰²", emoji: "ğŸŸ¦", bg: "bg-blue-50", border: "border-blue-200", text: "text-blue-700", items: [
                        { name: "é¯¨é­š", emoji: "ğŸ‹" }, { name: "ç‰›ä»”è¤²", emoji: "ğŸ‘–" }, { name: "è—è“", emoji: "ğŸ«" }, { name: "é‘½çŸ³", emoji: "ğŸ’" }, { name: "æ°´æ»´", emoji: "ğŸ’§" },
                        { name: "æµ·è±š", emoji: "ğŸ¬" }, { name: "é­š", emoji: "ğŸŸ" }, { name: "å†°å¡Š", emoji: "ğŸ§Š" }, { name: "å¸½å­", emoji: "ğŸ§¢" }, { name: "æ›¸æœ¬", emoji: "ğŸ“˜" },
                        { name: "é›¨å‚˜", emoji: "â˜‚ï¸" }, { name: "æµ·æµª", emoji: "ğŸŒŠ" }, { name: "é›ªèŠ±", emoji: "â„ï¸" }, { name: "åœ°çƒ", emoji: "ğŸŒ" }, { name: "ç¡è¦º", emoji: "ğŸ’¤" },
                        { name: "é¢±é¢¨", emoji: "ğŸŒ€" }, { name: "è—å¿ƒ", emoji: "ğŸ’™" }, { name: "åœ“å½¢", emoji: "ğŸ”µ" }, { name: "è¥¯è¡«", emoji: "ğŸ‘•" }, { name: "æ°´æ™¶çƒ", emoji: "ğŸ”®" }
                    ]},
                    green: { label: "ç¶ è‰²", emoji: "ğŸŸ©", bg: "bg-green-50", border: "border-green-200", text: "text-green-700", items: [
                        { name: "é’è›™", emoji: "ğŸ¸" }, { name: "æ¨¹æœ¨", emoji: "ğŸŒ³" }, { name: "é»ƒç“œ", emoji: "ğŸ¥’" }, { name: "çƒé¾œ", emoji: "ğŸ¢" }, { name: "å¥‡ç•°æœ", emoji: "ğŸ¥" },
                        { name: "é±·é­š", emoji: "ğŸŠ" }, { name: "è›‡", emoji: "ğŸ" }, { name: "èœ¥èœ´", emoji: "ğŸ¦" }, { name: "é’è˜‹æœ", emoji: "ğŸ" }, { name: "è±Œè±†", emoji: "ğŸ«›" },
                        { name: "ä»™äººæŒ", emoji: "ğŸŒµ" }, { name: "ç«¹å­", emoji: "ğŸ" }, { name: "æ¾æ¨¹", emoji: "ğŸŒ²" }, { name: "è–èª•æ¨¹", emoji: "ğŸ„" }, { name: "å¹¸é‹è‰", emoji: "ğŸ€" },
                        { name: "ç¶ å¿ƒ", emoji: "ğŸ’š" }, { name: "ç¶²çƒ", emoji: "ğŸ¾" }, { name: "èŠ±æ¤°èœ", emoji: "ğŸ¥¦" }, { name: "æ¨¹è‘‰", emoji: "ğŸƒ" }, { name: "è‰", emoji: "ğŸŒ¿" }
                    ]},
                    yellow: { label: "é»ƒè‰²", emoji: "ğŸŸ¨", bg: "bg-yellow-50", border: "border-yellow-200", text: "text-yellow-700", items: [
                        { name: "é¦™è•‰", emoji: "ğŸŒ" }, { name: "å¤ªé™½", emoji: "â˜€ï¸" }, { name: "å°é´¨", emoji: "ğŸ¤" }, { name: "èµ·å¸", emoji: "ğŸ§€" }, { name: "æª¸æª¬", emoji: "ğŸ‹" },
                        { name: "èœœèœ‚", emoji: "ğŸ" }, { name: "å‘æ—¥è‘µ", emoji: "ğŸŒ»" }, { name: "é³³æ¢¨", emoji: "ğŸ" }, { name: "æ˜Ÿæ˜Ÿ", emoji: "â­" }, { name: "çç›ƒ", emoji: "ğŸ†" },
                        { name: "çš‡å† ", emoji: "ğŸ‘‘" }, { name: "é•·é ¸é¹¿", emoji: "ğŸ¦’" }, { name: "æ ¡è»Š", emoji: "ğŸšŒ" }, { name: "ç‰ç±³", emoji: "ğŸŒ½" }, { name: "è–¯æ¢", emoji: "ğŸŸ" },
                        { name: "å¥¶æ²¹", emoji: "ğŸ§ˆ" }, { name: "æœˆäº®", emoji: "ğŸŒ™" }, { name: "å°é›", emoji: "ğŸ£" }, { name: "å·¥ç¨‹å¸½", emoji: "ğŸ‘·" }, { name: "é–ƒé›»", emoji: "âš¡" }
                    ]},
                    purple: { label: "ç´«è‰²", emoji: "ğŸŸª", bg: "bg-purple-50", border: "border-purple-200", text: "text-purple-700", items: [
                        { name: "è‘¡è„", emoji: "ğŸ‡" }, { name: "èŒ„å­", emoji: "ğŸ†" }, { name: "ç´«è‰²åœ“å½¢", emoji: "ğŸŸ£" }, { name: "ç´«å¿ƒ", emoji: "ğŸ’œ" }, { name: "é›¨å‚˜", emoji: "â˜‚ï¸" },
                        { name: "æ°´æ™¶çƒ", emoji: "ğŸ”®" }, { name: "å¤–æ˜Ÿäºº", emoji: "ğŸ‘¾" }, { name: "åœ°ç“œ", emoji: "ğŸ " }, { name: "å°æƒ¡é­”", emoji: "ğŸ˜ˆ" }, { name: "ç¨è§’ç¸", emoji: "ğŸ¦„" },
                        { name: "ç…™ç«", emoji: "ğŸ†" }, { name: "æ”¶èµ·çš„å‚˜", emoji: "ğŸŒ‚" }, { name: "é¢¨ç®", emoji: "ğŸª" }, { name: "æ„›å¿ƒè£é£¾", emoji: "ğŸ’Ÿ" }, { name: "åŸå­", emoji: "âš›ï¸" },
                        { name: "ç‡­å°", emoji: "ğŸ•" }, { name: "å…­èŠ’æ˜Ÿ", emoji: "ğŸ”¯" }, { name: "è—è“", emoji: "ğŸ«" }, { name: "æ´‹è£", emoji: "ğŸ‘—" }, { name: "ç·å¸¶", emoji: "ğŸ€" }
                    ]},
                    orange: { label: "æ©™è‰²", emoji: "ğŸŸ§", bg: "bg-orange-50", border: "border-orange-200", text: "text-orange-700", items: [
                        { name: "æ©˜å­", emoji: "ğŸŠ" }, { name: "ç±ƒçƒ", emoji: "ğŸ€" }, { name: "å—ç“œ", emoji: "ğŸƒ" }, { name: "ç‹ç‹¸", emoji: "ğŸ¦Š" }, { name: "ç´…è˜¿è””", emoji: "ğŸ¥•" },
                        { name: "æ©™å¿ƒ", emoji: "ğŸ§¡" }, { name: "æ©™è‰²æ–¹å¡Š", emoji: "ğŸŸ§" }, { name: "æ›¸æœ¬", emoji: "ğŸ“™" }, { name: "è½è‘‰", emoji: "ğŸ‚" }, { name: "è€è™", emoji: "ğŸ…" },
                        { name: "è¦å­", emoji: "ğŸ¦" }, { name: "å¸³ç¯·", emoji: "â›º" }, { name: "èƒŒå¿ƒ", emoji: "ğŸ¦º" }, { name: "ç£šé ­", emoji: "ğŸ§±" }, { name: "èŠ’æœ", emoji: "ğŸ¥­" },
                        { name: "ç…å­", emoji: "ğŸ¦" }, { name: "å¯é Œ", emoji: "ğŸ¥" }, { name: "ç‚¸è¦", emoji: "ğŸ¤" }, { name: "è±å½¢", emoji: "ğŸ”¸" }, { name: "å…«è§’æ˜Ÿ", emoji: "âœ´ï¸" }
                    ]}
                }
            },
            usage: {
                buckets: {
                    cleaning: { label: "æ¸…æ½”", emoji: "ğŸ§¹", bg: "bg-cyan-50", border: "border-cyan-200", text: "text-cyan-700", items: [
                        { name: "æƒæŠŠ", emoji: "ğŸ§¹" }, { name: "å¸å¡µå™¨", emoji: "ğŸ”Œ" }, { name: "è‚¥çš‚", emoji: "ğŸ§¼" }, { name: "æµ·ç¶¿", emoji: "ğŸ§½" }, { name: "æ°´æ¡¶", emoji: "ğŸª£" },
                        { name: "åƒåœ¾æ¡¶", emoji: "ğŸ—‘ï¸" }, { name: "è¡›ç”Ÿç´™", emoji: "ğŸ§»" }, { name: "åˆ·å­", emoji: "ğŸ–Œï¸" }, { name: "æ‰‹å¥—", emoji: "ğŸ§¤" }, { name: "æ´—è¡£æ©Ÿ", emoji: "ğŸ§¼" },
                        { name: "æ°´é¾é ­", emoji: "ğŸš°" }, { name: "å™´éœ§", emoji: "ğŸ§´" }, { name: "å›æ”¶æ¡¶", emoji: "â™»ï¸" }, { name: "é€šé¦¬æ¡¶", emoji: "ğŸª " }, { name: "æ´—è¡£ç±ƒ", emoji: "ğŸ§º" },
                        { name: "æ¯›å·¾", emoji: "ğŸ§–" }, { name: "æ´—æ‰‹", emoji: "ğŸ‘" }, { name: "è“®è“¬é ­", emoji: "ğŸš¿" }, { name: "æµ´ç¼¸", emoji: "ğŸ›" }, { name: "æŠ¹å¸ƒ", emoji: "ğŸ§£" }
                    ]},
                    writing: { label: "æ›¸å¯«", emoji: "âœï¸", bg: "bg-amber-50", border: "border-amber-200", text: "text-amber-700", items: [
                        { name: "é‰›ç­†", emoji: "âœï¸" }, { name: "åŸå­ç­†", emoji: "ğŸ–Šï¸" }, { name: "ç­†è¨˜æœ¬", emoji: "ğŸ““" }, { name: "è Ÿç­†", emoji: "ğŸ–ï¸" }, { name: "æ›¸æœ¬", emoji: "ğŸ“–" },
                        { name: "å°º", emoji: "ğŸ“" }, { name: "å‰ªåˆ€", emoji: "âœ‚ï¸" }, { name: "è¿´ç´‹é‡", emoji: "ğŸ“" }, { name: "ä¿¡å°", emoji: "âœ‰ï¸" }, { name: "éµç›¤", emoji: "âŒ¨ï¸" },
                        { name: "é›»è…¦", emoji: "ğŸ’»" }, { name: "å·è»¸", emoji: "ğŸ“œ" }, { name: "å ±ç´™", emoji: "ğŸ“°" }, { name: "é‹¼ç­†", emoji: "ğŸ–‹ï¸" }, { name: "ç•«ç­†", emoji: "ğŸ–Œï¸" },
                        { name: "èª¿è‰²ç›¤", emoji: "ğŸ¨" }, { name: "é»‘æ¿", emoji: "â¬›" }, { name: "ä¾¿æ¢ç´™", emoji: "ğŸ“" }, { name: "è¨ˆç®—æ©Ÿ", emoji: "ğŸ§®" }, { name: "åœ–é‡˜", emoji: "ğŸ“" }
                    ]},
                    eating: { label: "é¤å…·", emoji: "ğŸ´", bg: "bg-orange-50", border: "border-orange-200", text: "text-orange-700", items: [
                        { name: "æ¹¯åŒ™", emoji: "ğŸ¥„" }, { name: "å‰å­", emoji: "ğŸ´" }, { name: "ç¢—", emoji: "ğŸ¥£" }, { name: "å¹³åº•é‹", emoji: "ğŸ³" }, { name: "ç­·å­", emoji: "ğŸ¥¢" },
                        { name: "ç›¤å­", emoji: "ğŸ½ï¸" }, { name: "èœåˆ€", emoji: "ğŸ”ª" }, { name: "æ¯å­", emoji: "ğŸ¥¤" }, { name: "é¦¬å…‹æ¯", emoji: "â˜•" }, { name: "èŒ¶å£º", emoji: "ğŸ«–" },
                        { name: "é¹½å·´", emoji: "ğŸ§‚" }, { name: "é‹å­", emoji: "ğŸ²" }, { name: "ç½å­", emoji: "ğŸ«™" }, { name: "å¥¶ç“¶", emoji: "ğŸ¼" }, { name: "ç»ç’ƒæ¯", emoji: "ğŸ¥›" },
                        { name: "é£²æ–™", emoji: "ğŸ¸" }, { name: "ç½é ­", emoji: "ğŸ¥«" }, { name: "ä¾¿ç•¶", emoji: "ğŸ±" }, { name: "çˆ†ç±³èŠ±", emoji: "ğŸ¿" }, { name: "éŸå­", emoji: "ğŸ¥˜" }
                    ]},
                    clothing: { label: "è¡£ç‰©", emoji: "ğŸ‘•", bg: "bg-violet-50", border: "border-violet-200", text: "text-violet-700", items: [
                        { name: "Tæ¤", emoji: "ğŸ‘•" }, { name: "è¤²å­", emoji: "ğŸ‘–" }, { name: "è¥ªå­", emoji: "ğŸ§¦" }, { name: "å¸½å­", emoji: "ğŸ§¢" }, { name: "çœ¼é¡", emoji: "ğŸ‘“" },
                        { name: "æ´‹è£", emoji: "ğŸ‘—" }, { name: "å¤–å¥—", emoji: "ğŸ§¥" }, { name: "æ³³è¡£", emoji: "ğŸ‘™" }, { name: "å’Œæœ", emoji: "ğŸ‘˜" }, { name: "é ˜å¸¶", emoji: "ğŸ‘”" },
                        { name: "åœå·¾", emoji: "ğŸ§£" }, { name: "æ‰‹å¥—", emoji: "ğŸ§¤" }, { name: "çƒé‹", emoji: "ğŸ‘Ÿ" }, { name: "é«˜è·Ÿé‹", emoji: "ğŸ‘ " }, { name: "é´å­", emoji: "ğŸ‘¢" },
                        { name: "æ¶¼é‹", emoji: "ğŸ‘¡" }, { name: "åŒ…åŒ…", emoji: "ğŸ‘œ" }, { name: "èƒŒåŒ…", emoji: "ğŸ’" }, { name: "æˆ’æŒ‡", emoji: "ğŸ’" }, { name: "çš‡å† ", emoji: "ğŸ‘‘" }
                    ]}
                }
            },
            location: {
                buckets: {
                    bathroom: { label: "æµ´å®¤", emoji: "ğŸ›", bg: "bg-teal-50", border: "border-teal-200", text: "text-teal-700", items: [
                        { name: "æµ´ç¼¸", emoji: "ğŸ›" }, { name: "é¦¬æ¡¶", emoji: "ğŸš½" }, { name: "ç‰™åˆ·", emoji: "ğŸª¥" }, { name: "è“®è“¬é ­", emoji: "ğŸš¿" }, { name: "è¡›ç”Ÿç´™", emoji: "ğŸ§»" },
                        { name: "è‚¥çš‚", emoji: "ğŸ§¼" }, { name: "æ¯›å·¾", emoji: "ğŸ§–" }, { name: "é¦¬æ¡¶å¸", emoji: "ğŸª " }, { name: "ä¹³æ¶²", emoji: "ğŸ§´" },
                        { name: "æµ·ç¶¿", emoji: "ğŸ§½" }, { name: "æ°´æ¡¶", emoji: "ğŸª£" }, { name: "åˆ®é¬åˆ€", emoji: "ğŸª’" }, { name: "æ¢³å­", emoji: "ğŸ’‡" }, { name: "æ´—é«®ç²¾", emoji: "ğŸ§´" }
                    ]},
                    bedroom: { label: "ç¡æˆ¿", emoji: "ğŸ›ï¸", bg: "bg-indigo-50", border: "border-indigo-200", text: "text-indigo-700", items: [
                        { name: "åºŠ", emoji: "ğŸ›ï¸" }, { name: "æ•é ­", emoji: "ğŸ’¤" }, { name: "é¬§é˜", emoji: "â°" }, { name: "æª¯ç‡ˆ", emoji: "ğŸ’¡" }, { name: "è¡£æ«ƒ", emoji: "ğŸšª" },
                        { name: "æ³°è¿ªç†Š", emoji: "ğŸ§¸" }, { name: "æ›¸æœ¬", emoji: "ğŸ“–" }, { name: "æ‰‹æ©Ÿ", emoji: "ğŸ“±" }, { name: "ç¡è¡£", emoji: "ğŸ‘š" }, { name: "æ—¥æ›†", emoji: "ğŸ“…" }
                    ]},
                    kitchen: { label: "å»šæˆ¿", emoji: "ğŸ‘¨â€ğŸ³", bg: "bg-rose-50", border: "border-rose-200", text: "text-rose-700", items: [
                        { name: "å†°ç®±", emoji: "â„ï¸" }, { name: "çƒ¤ç®±", emoji: "ğŸ¥˜" }, { name: "èœåˆ€", emoji: "ğŸ”ª" }, { name: "å¾®æ³¢çˆ", emoji: "â²ï¸" }, { name: "é‹éŸ", emoji: "ğŸ³" },
                        { name: "æ¹¯é‹", emoji: "ğŸ²" }, { name: "å¹³åº•é‹", emoji: "ğŸ³" }, { name: "ç¢—", emoji: "ğŸ¥£" }, { name: "ç›¤å­", emoji: "ğŸ½ï¸" }, { name: "æ¯å­", emoji: "ğŸ¥¤" },
                        { name: "æ¹¯åŒ™", emoji: "ğŸ¥„" }, { name: "å‰å­", emoji: "ğŸ´" }, { name: "ç­·å­", emoji: "ğŸ¥¢" }, { name: "é¹½å·´", emoji: "ğŸ§‚" }, { name: "é›è›‹", emoji: "ğŸ¥š" },
                        { name: "å»šå¸«", emoji: "ğŸ‘¨â€ğŸ³" }, { name: "è³¼ç‰©è¢‹", emoji: "ğŸ›ï¸" }
                    ]}
                }
            },
            other: {
                buckets: {
                    animal: { label: "å‹•ç‰©", emoji: "ğŸ¦", bg: "bg-yellow-50", border: "border-yellow-200", text: "text-yellow-800", items: [
                        { name: "ç…å­", emoji: "ğŸ¦" }, { name: "å…”å­", emoji: "ğŸ°" }, { name: "è²“å’ª", emoji: "ğŸ±" }, { name: "ç†Šè²“", emoji: "ğŸ¼" }, { name: "å¤§è±¡", emoji: "ğŸ˜" },
                        { name: "ç‹—", emoji: "ğŸ¶" }, { name: "è€è™", emoji: "ğŸ¯" }, { name: "çŒ´å­", emoji: "ğŸµ" }, { name: "è±¬", emoji: "ğŸ·" }, { name: "ç‰›", emoji: "ğŸ®" },
                        { name: "ç¶¿ç¾Š", emoji: "ğŸ‘" }, { name: "é¦¬", emoji: "ğŸ´" }, { name: "é›", emoji: "ğŸ”" }, { name: "é´¨å­", emoji: "ğŸ¦†" }, { name: "è€é¼ ", emoji: "ğŸ­" },
                        { name: "è›‡", emoji: "ğŸ" }, { name: "é­š", emoji: "ğŸŸ" }, { name: "é¯¨é­š", emoji: "ğŸ‹" }, { name: "ä¼éµ", emoji: "ğŸ§" }, { name: "ç†Š", emoji: "ğŸ»" }
                    ]},
                    plant: { label: "æ¤ç‰©", emoji: "ğŸŒ»", bg: "bg-emerald-50", border: "border-emerald-200", text: "text-emerald-700", items: [
                        { name: "å‘æ—¥è‘µ", emoji: "ğŸŒ»" }, { name: "ä»™äººæŒ", emoji: "ğŸŒµ" }, { name: "è˜‘è‡", emoji: "ğŸ„" }, { name: "é¬±é‡‘é¦™", emoji: "ğŸŒ·" }, { name: "æ¤°å­æ¨¹", emoji: "ğŸŒ´" },
                        { name: "ç«ç‘°", emoji: "ğŸŒ¹" }, { name: "æ‰¶æ¡‘èŠ±", emoji: "ğŸŒº" }, { name: "æ«»èŠ±", emoji: "ğŸŒ¸" }, { name: "èŠ±æŸ", emoji: "ğŸ’" }, { name: "è‰è—¥", emoji: "ğŸŒ¿" },
                        { name: "æ¨¹è‘‰", emoji: "ğŸƒ" }, { name: "å¹¸é‹è‰", emoji: "ğŸ€" }, { name: "æ¥“è‘‰", emoji: "ğŸ" }, { name: "æ¾æ¨¹", emoji: "ğŸŒ²" }, { name: "å¤§æ¨¹", emoji: "ğŸŒ³" },
                        { name: "ç«¹å­", emoji: "ğŸ" }, { name: "æ¨¹è‹—", emoji: "ğŸŒ±" }, { name: "ç¨»ç©—", emoji: "ğŸŒ¾" }, { name: "ç‰ç±³", emoji: "ğŸŒ½" }, { name: "è‘¡è„", emoji: "ğŸ‡" }
                    ]},
                    food: { label: "é£Ÿç‰©", emoji: "ğŸ¿", bg: "bg-red-50", border: "border-red-200", text: "text-red-800", items: [
                        { name: "çˆ†ç±³èŠ±", emoji: "ğŸ¿" }, { name: "æ¼¢å ¡", emoji: "ğŸ”" }, { name: "ç”œç”œåœˆ", emoji: "ğŸ©" }, { name: "å†°æ·‡æ·‹", emoji: "ğŸ¦" }, { name: "æŠ«è–©", emoji: "ğŸ•" },
                        { name: "ç†±ç‹—", emoji: "ğŸŒ­" }, { name: "è–¯æ¢", emoji: "ğŸŸ" }, { name: "å£½å¸", emoji: "ğŸ£" }, { name: "å¡”å¯", emoji: "ğŸŒ®" }, { name: "ç¾©å¤§åˆ©éºµ", emoji: "ğŸ" },
                        { name: "éºµåŒ…", emoji: "ğŸ" }, { name: "è›‹ç³•", emoji: "ğŸ°" }, { name: "é¤…ä¹¾", emoji: "ğŸª" }, { name: "å·§å…‹åŠ›", emoji: "ğŸ«" }, { name: "ç³–æœ", emoji: "ğŸ¬" },
                        { name: "æ£’æ£’ç³–", emoji: "ğŸ­" }, { name: "è˜‹æœ", emoji: "ğŸ" }, { name: "é¦™è•‰", emoji: "ğŸŒ" }, { name: "è‘¡è„", emoji: "ğŸ‡" }, { name: "è¥¿ç“œ", emoji: "ğŸ‰" }
                    ]},
                    vehicle: { label: "äº¤é€š", emoji: "ğŸš—", bg: "bg-gray-50", border: "border-gray-300", text: "text-gray-700", items: [
                        { name: "æ±½è»Š", emoji: "ğŸš—" }, { name: "é£›æ©Ÿ", emoji: "âœˆï¸" }, { name: "ç«è»Š", emoji: "ğŸš†" }, { name: "è…³è¸è»Š", emoji: "ğŸš²" }, { name: "èˆ¹", emoji: "ğŸš¢" },
                        { name: "å…¬è»Š", emoji: "ğŸšŒ" }, { name: "è¨ˆç¨‹è»Š", emoji: "ğŸš•" }, { name: "è­¦è»Š", emoji: "ğŸš“" }, { name: "æ¶ˆé˜²è»Š", emoji: "ğŸš’" }, { name: "æ•‘è­·è»Š", emoji: "ğŸš‘" },
                        { name: "æ»‘æ¿è»Š", emoji: "ğŸ›´" }, { name: "æ‘©æ‰˜è»Š", emoji: "ğŸï¸" }, { name: "ç›´å‡æ©Ÿ", emoji: "ğŸš" }, { name: "ç«ç®­", emoji: "ğŸš€" }, { name: "ç¨æœ¨èˆŸ", emoji: "ğŸ›¶" },
                        { name: "å¿«è‰‡", emoji: "ğŸš¤" }, { name: "å¡è»Š", emoji: "ğŸšš" }, { name: "æ‹–æ‹‰æ©Ÿ", emoji: "ğŸšœ" }, { name: "è¼ªæ¤…", emoji: "â™¿" }, { name: "å¬°å…’è»Š", emoji: "ğŸ›’" }
                    ]},
                    sport: { label: "é‹å‹•", emoji: "âš½", bg: "bg-sky-50", border: "border-sky-200", text: "text-sky-700", items: [
                        { name: "è¶³çƒ", emoji: "âš½" }, { name: "ç±ƒçƒ", emoji: "ğŸ€" }, { name: "æ©„æ¬–çƒ", emoji: "ğŸˆ" }, { name: "æ£’çƒ", emoji: "âš¾" }, { name: "ç¶²çƒ", emoji: "ğŸ¾" },
                        { name: "æ’çƒ", emoji: "ğŸ" }, { name: "æ’çƒ", emoji: "ğŸ±" }, { name: "æ¡Œçƒ", emoji: "ğŸ“" }, { name: "ç¾½çƒ", emoji: "ğŸ¸" }, { name: "çƒé–€", emoji: "ğŸ¥…" },
                        { name: "æ‹³æ“Š", emoji: "ğŸ¥Š" }, { name: "æŸ”é“æœ", emoji: "ğŸ¥‹" }, { name: "æºœå†°é‹", emoji: "â›¸ï¸" }, { name: "é‡£é­š", emoji: "ğŸ£" }, { name: "æ½›æ°´", emoji: "ğŸ¤¿" },
                        { name: "æ»‘é›ªæ¿", emoji: "ğŸ¿" }, { name: "é›ªæ©‡", emoji: "ğŸ›·" }, { name: "å¼“ç®­", emoji: "ğŸ¹" }, { name: "é«˜çˆ¾å¤«", emoji: "â›³" }, { name: "çç›ƒ", emoji: "ğŸ†" }
                    ]},
                    nature: { label: "è‡ªç„¶", emoji: "â˜€ï¸", bg: "bg-cyan-50", border: "border-cyan-200", text: "text-cyan-700", items: [
                        { name: "å¤ªé™½", emoji: "â˜€ï¸" }, { name: "æœˆäº®", emoji: "ğŸŒ™" }, { name: "æ˜Ÿæ˜Ÿ", emoji: "â­" }, { name: "é›²æœµ", emoji: "â˜ï¸" }, { name: "ä¸‹é›¨", emoji: "ğŸŒ§ï¸" },
                        { name: "é›ªèŠ±", emoji: "â„ï¸" }, { name: "é–ƒé›»", emoji: "âš¡" }, { name: "å½©è™¹", emoji: "ğŸŒˆ" }, { name: "æµ·æµª", emoji: "ğŸŒŠ" }, { name: "ç«ç„°", emoji: "ğŸ”¥" },
                        { name: "æ°´æ»´", emoji: "ğŸ’§" }, { name: "é›ªå±±", emoji: "ğŸ”ï¸" }, { name: "ç«å±±", emoji: "ğŸŒ‹" }, { name: "éŠ€æ²³", emoji: "ğŸŒŒ" }, { name: "åœ°çƒ", emoji: "ğŸŒ" },
                        { name: "é¾æ²é¢¨", emoji: "ğŸŒªï¸" }, { name: "å¼·é¢¨", emoji: "ğŸŒ¬ï¸" }, { name: "å½—æ˜Ÿ", emoji: "â˜„ï¸" }, { name: "é›¨å‚˜", emoji: "â˜”" }, { name: "æ™´å¤©", emoji: "ğŸŒ¤ï¸" }
                    ]}
                }
            }
        };

        // --- éŠæˆ²ç‹€æ…‹è®Šæ•¸ ---
        let currentMode = null;
        let selectedCategories = []; 
        let gameQueue = []; 
        let currentIndex = 0;
        let score = 0;
        let totalQuestions = 0; // æ”¹ç‚ºå‹•æ…‹è¨ˆç®—
        let audioContext = null;

        // --- éŸ³æ•ˆç³»çµ± ---
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playSound(type) {
            if (!audioContext) return;
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            osc.connect(gain);
            gain.connect(audioContext.destination);

            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(500, audioContext.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1000, audioContext.currentTime + 0.1);
                gain.gain.setValueAtTime(0.3, audioContext.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                osc.start();
                osc.stop(audioContext.currentTime + 0.5);
            } else {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioContext.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioContext.currentTime + 0.3);
                gain.gain.setValueAtTime(0.3, audioContext.currentTime);
                gain.gain.linearRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                osc.start();
                osc.stop(audioContext.currentTime + 0.3);
            }
        }

        // --- ä»‹é¢æ§åˆ¶ ---
        function selectMode(mode) {
            initAudio(); 
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-blue-400');
            });
            event.currentTarget.classList.add('ring-4', 'ring-blue-400');
            document.getElementById('difficulty-area').classList.remove('hidden');
        }

        function showScreen(screenId) {
            ['menu-screen', 'game-screen', 'result-screen'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');

            // ğŸŒŸ æ§åˆ¶ Home æŒ‰éˆ•çš„é¡¯ç¤º/éš±è—
            const homeBtn = document.getElementById('home-btn');
            if (screenId === 'menu-screen') {
                homeBtn.classList.add('invisible');
            } else {
                homeBtn.classList.remove('invisible');
            }
        }

        // --- éŠæˆ²é‚è¼¯æ ¸å¿ƒ ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startGame(numCategories) {
            if (!currentMode) return;

            const allBuckets = Object.keys(DATABASE[currentMode].buckets);
            const count = Math.min(numCategories, allBuckets.length);
            
            selectedCategories = shuffleArray([...allBuckets]).slice(0, count);

            let rawItems = [];
            selectedCategories.forEach(catKey => {
                const catData = DATABASE[currentMode].buckets[catKey];
                
                // å¾æ¯å€‹åˆ†é¡ä¸­éš¨æ©ŸæŠ½å– 4 å€‹ç‰©å“
                const shuffledItems = shuffleArray([...catData.items]); // å…ˆæ‰“äº‚è©²åˆ†é¡çš„æ‰€æœ‰ç‰©å“
                const pickedItems = shuffledItems.slice(0, 4); // å–å‰ 4 å€‹
                
                pickedItems.forEach(item => {
                    rawItems.push({ ...item, targetCategory: catKey });
                });
            });

            // éš¨æ©Ÿæ‰“äº‚é¡Œç›®é †åº
            gameQueue = shuffleArray(rawItems);
            totalQuestions = gameQueue.length;

            currentIndex = 0;
            score = 0;
            updateScoreUI();

            // 1. åˆå§‹åŒ–æ”¶é›†ç±ƒ (Bins)
            renderBins();

            // 2. åˆå§‹åŒ–æŒ‰éˆ•
            renderButtons();

            showScreen('game-screen');
            loadNextItem();
        }

        // æ¸²æŸ“æ”¶é›†ç±ƒ
        function renderBins() {
            const container = document.getElementById('bins-container');
            container.innerHTML = '';
            
            // è¨­å®š grid æ¬„ä½æ•¸
            if (selectedCategories.length === 3) {
                container.className = 'grid grid-cols-3 gap-2 sm:gap-3 mb-2 shrink-0 h-32 sm:h-36';
            } else {
                container.className = 'grid grid-cols-2 gap-4 mb-2 shrink-0 h-32 sm:h-36';
            }

            selectedCategories.forEach(catKey => {
                const catData = DATABASE[currentMode].buckets[catKey];
                const bin = document.createElement('div');
                // ä½¿ç”¨è³‡æ–™åº«ä¸­çš„æ¨£å¼è¨­å®š
                bin.className = `rounded-xl border-2 ${catData.border} ${catData.bg} p-2 flex flex-col relative overflow-hidden`;
                bin.id = `bin-${catKey}`; 
                
                bin.innerHTML = `
                    <div class="flex items-center justify-center gap-1 mb-1 border-b ${catData.border} pb-1">
                        <span class="text-lg sm:text-xl">${catData.emoji}</span>
                        <span class="text-sm font-bold ${catData.text}">${catData.label}</span>
                    </div>
                    <div class="bin-content flex flex-wrap gap-1 content-start justify-center overflow-y-auto no-scrollbar flex-1">
                        <!-- ç­”å°çš„ç‰©å“æœƒå‡ºç¾åœ¨é€™è£¡ -->
                    </div>
                `;
                container.appendChild(bin);
            });
        }

        function renderButtons() {
            const container = document.getElementById('category-buttons');
            container.innerHTML = '';
            
            if (selectedCategories.length === 3) {
                container.className = 'grid grid-cols-3 gap-2 sm:gap-3 mt-auto shrink-0 pb-2';
            } else {
                container.className = 'grid grid-cols-2 gap-4 mt-auto shrink-0 pb-2';
            }

            selectedCategories.forEach(catKey => {
                const catData = DATABASE[currentMode].buckets[catKey];
                const btn = document.createElement('button');
                btn.className = 'bg-white border-2 border-gray-200 hover:border-blue-400 hover:bg-blue-50 text-gray-700 font-bold py-2 px-1 rounded-xl shadow-md transition-all active:scale-95 flex flex-col items-center justify-center h-20 sm:h-24';
                btn.onclick = () => handleAnswer(catKey);
                btn.innerHTML = `
                    <span class="text-3xl sm:text-4xl mb-1">${catData.emoji}</span>
                    <span class="text-sm sm:text-base">${catData.label}</span>
                `;
                container.appendChild(btn);
            });
        }

        function loadNextItem() {
            if (currentIndex >= totalQuestions) {
                endGame();
                return;
            }

            const item = gameQueue[currentIndex];
            const card = document.getElementById('item-card');
            const emojiEl = document.getElementById('item-emoji');
            const nameEl = document.getElementById('item-name');
            const feedbackEl = document.getElementById('feedback-text');

            emojiEl.className = 'text-7xl sm:text-8xl mb-2 transition-transform duration-300 select-none'; 
            feedbackEl.style.opacity = '0';
            
            card.style.opacity = '0';
            card.style.transform = 'scale(0.8)';
            
            setTimeout(() => {
                emojiEl.textContent = item.emoji;
                nameEl.textContent = item.name;
                card.style.opacity = '1';
                card.style.transform = 'scale(1)';
                
                document.getElementById('current-count').textContent = currentIndex + 1;
                document.getElementById('total-count').textContent = totalQuestions;
            }, 200);

            toggleButtons(true);
        }

        function handleAnswer(selectedKey) {
            const currentItem = gameQueue[currentIndex];
            const isCorrect = selectedKey === currentItem.targetCategory;
            const feedbackEl = document.getElementById('feedback-text');
            const emojiEl = document.getElementById('item-emoji');

            toggleButtons(false); 

            if (isCorrect) {
                playSound('correct');
                score += 100 / totalQuestions;
                feedbackEl.textContent = "ç­”å°äº†ï¼â­•";
                feedbackEl.className = "h-8 mt-2 font-bold text-lg text-center text-green-600 animate-correct";
                emojiEl.classList.add('animate-correct');

                // å°‡ç‰©å“æ·»åŠ åˆ°ä¸Šæ–¹çš„ç±ƒå­ä¸­
                addToBin(selectedKey, currentItem.emoji);

            } else {
                playSound('wrong');
                feedbackEl.textContent = "å†è©¦ä¸€æ¬¡ï¼âŒ";
                feedbackEl.className = "h-8 mt-2 font-bold text-lg text-center text-red-500 animate-wrong";
                emojiEl.classList.add('animate-wrong');
            }

            feedbackEl.style.opacity = '1';
            updateScoreUI();

            setTimeout(() => {
                currentIndex++;
                loadNextItem();
            }, 1200);
        }

        // å°‡ç‰©å“å‹•ç•«åŠ å…¥ç±ƒå­çš„é‚è¼¯
        function addToBin(categoryKey, emoji) {
            const bin = document.querySelector(`#bin-${categoryKey} .bin-content`);
            if (bin) {
                const smallItem = document.createElement('span');
                smallItem.textContent = emoji;
                smallItem.className = 'text-2xl animate-item-appear drop-shadow-sm'; 
                bin.appendChild(smallItem);
                
                // è‡ªå‹•æ²å‹•åˆ°åº•éƒ¨
                bin.scrollTop = bin.scrollHeight;
            }
        }

        function toggleButtons(enable) {
            const buttons = document.querySelectorAll('#category-buttons button');
            buttons.forEach(btn => {
                btn.disabled = !enable;
                if (!enable) {
                    btn.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    btn.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            });
        }

        function updateScoreUI() {
            document.getElementById('score-display').textContent = Math.round(score);
        }

        function endGame() {
            showScreen('result-screen');
            const finalScore = Math.round(score);
            document.getElementById('final-score').textContent = finalScore;
            
            const msgEl = document.getElementById('result-message');
            if (finalScore === 100) {
                msgEl.textContent = "å¤ªå²å®³äº†ï¼ä½ æ˜¯åˆ†é¡å¤§å¸«ï¼ğŸŒŸ";
            } else if (finalScore >= 60) {
                msgEl.textContent = "åšå¾—å¾ˆå¥½ï¼ç¹¼çºŒåŠ æ²¹ï¼ğŸ‘";
            } else {
                msgEl.textContent = "å†æ¥å†å²ï¼Œä¸‹æ¬¡æœƒæ›´å¥½ï¼ğŸ’ª";
            }
        }

        function resetGame() {
            currentMode = null;
            document.getElementById('difficulty-area').classList.add('hidden');
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-blue-400');
            });
            showScreen('menu-screen');
        }

    </script>
</body>
</html>
